Port semisort from python to ruby.

